<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="Responsive Admin &amp; Dashboard Template based on Bootstrap 5">
	<meta name="author" content="AdminKit">
	<meta name="keywords" content="adminkit, bootstrap, bootstrap 5, admin, dashboard, template, responsive, css, sass, html, theme, front-end, ui kit, web">

	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link rel="shortcut icon" href="img/icons/icon-48x48.png" />

	<link rel="canonical" href="https://demo-basic.adminkit.io/ui-cards.html" />

	<title>Cards | AdminKit Demo</title>

	<link href="css/app.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
</head>

<body>
	<div class="wrapper">
		<nav id="sidebar" class="sidebar js-sidebar">
			<div class="sidebar-content js-simplebar">
				<a class="sidebar-brand" href="index">
					<span class="align-middle">ICIA_MEMBOARD</span>
				</a>

				<ul class="sidebar-nav">
					<li class="sidebar-header">
						MEMBER
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="joinForm">
							<i class="align-middle" data-feather="sliders"></i> <span class="align-middle">회원가입</span>
						</a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="loginForm">
							<i class="align-middle" data-feather="user"></i> <span class="align-middle">로그인</span>
						</a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="mList">
							<i class="align-middle" data-feather="log-in"></i> <span class="align-middle">회원목록</span>
						</a>
					</li>

					<li class="sidebar-item">
						<!-- thymeleaf(th)로 경로를 보낼 때 @{} 값 안에 값을 넣어준다. -->
						<a class="sidebar-link" th:href="@{mView(mId=${session.loginId})}">
							<i class="align-middle" data-feather="user-plus"></i> <span class="align-middle">내정보보기</span>
						</a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="logout">
							<i class="align-middle" data-feather="book"></i> <span class="align-middle">로그아웃</span>
						</a>
					</li>

					<li class="sidebar-header">
						<!--Tools & Components 대신에 BOARD-->
						BOARD
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="writeForm">
							<i class="align-middle" data-feather="square"></i> <span class="align-middle">글쓰기</span>
						</a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="bList">
							<i class="align-middle" data-feather="check-square"></i> <span class="align-middle">글목록</span>
						</a>
					</li>

					<li class="sidebar-item active">
						<a class="sidebar-link" th:href="@{bView(bNo=1)}">
							<i class="align-middle" data-feather="grid"></i> <span class="align-middle">게시글보기</span>
						</a>
					</li>
					<!--
                                <li class="sidebar-item">
                                   <a class="sidebar-link" href="ui-typography.html">
                                      <i class="align-middle" data-feather="align-left"></i> <span
                                         class="align-middle">Typography</span>
                                   </a>
                                </li>

                                <li class="sidebar-item">
                                   <a class="sidebar-link" href="icons-feather.html">
                                      <i class="align-middle" data-feather="coffee"></i> <span class="align-middle">Icons</span>
                                   </a>
                                </li>
                    -->

				</ul>

				<!--<div class="sidebar-cta">
                   <div class="sidebar-cta-content">
                      <strong class="d-inline-block mb-2">Upgrade to Pro</strong>
                      <div class="mb-3 text-sm">
                         Are you looking for more components? Check out our premium version.
                      </div>
                      <div class="d-grid">
                         <a href="upgrade-to-pro.html" class="btn btn-primary">Upgrade to Pro</a>
                      </div>
                   </div>
                </div>-->
			</div>
		</nav>

		<div class="main">
			<nav class="navbar navbar-expand navbar-light navbar-bg">
				<a class="sidebar-toggle js-sidebar-toggle">
					<i class="hamburger align-self-center"></i>
				</a>

				<div class="navbar-collapse collapse">
					<ul class="navbar-nav navbar-align">

						<li class="nav-item dropdown">
							<a class="nav-icon dropdown-toggle d-inline-block d-sm-none" href="#" data-bs-toggle="dropdown">
								<i class="align-middle" data-feather="settings"></i>
							</a>

							<a class="nav-link dropdown-toggle d-none d-sm-inline-block" href="#" data-bs-toggle="dropdown">

								<!--<img th:if="${session.loginId eq null}" src="img/avatars/avatar.jpg" class="avatar img-fluid rounded me-1"/>-->
								<img th:if="${session.loginId ne null}" th:src="@{/profile/{mProfileName}(mProfileName=${session.loginProfile})}" class="avatar img-fluid rounded me-1"/>

								<span th:if="${session.loginId eq null}" class="text-dark">로그인하기</span>
								<span th:if="${session.loginId ne null}" class="text-dark" th:text="${session.loginId}"></span>

							</a>
							<!--로그인x-->
							<div th:if="${session.loginId eq null}" class="dropdown-menu dropdown-menu-end">
								<a class="dropdown-item" href="joinForm"><i class="align-middle me-1"
																			data-feather="user"></i> 회원가입</a>
								<a class="dropdown-item" href="loginForm"><i class="align-middle me-1" data-feather="pie-chart"></i>
									로그인</a>

								<a class="dropdown-item" href="mList"><i class="align-middle me-1"
																		 data-feather="settings"></i> 회원목록</a>
								<a class="dropdown-item" href="bList"><i class="align-middle me-1"
																		 data-feather="help-circle"></i> 게시글목록</a>

							</div>
							<!--로그인O-->
							<div th:if="${session.loginId ne null}" class="dropdown-menu dropdown-menu-end">
								<a class="dropdown-item" href="mList"><i class="align-middle me-1"
																		 data-feather="user"></i> 회원목록</a>

								<div class="dropdown-divider"></div>
								<a class="dropdown-item" href="writeForm"><i class="align-middle me-1"
																			 data-feather="settings"></i> 글작성</a>
								<a class="dropdown-item" href="bList"><i class="align-middle me-1"
																		 data-feather="help-circle"></i> 글목록</a>
								<div class="dropdown-divider"></div>
								<a class="dropdown-item" href="logout">Log out</a>
							</div>
						</li>
					</ul>
				</div>
			</nav>

			<main class="content">
				<div class="container-fluid p-0">

					<div class="mb-3">
						<h1 class="h3 d-inline align-middle">게시글 상세보기</h1>
					</div>
					<div class="row">
						<!--<div class="col-12 col-md-6">
							<div class="card">
								<img class="card-img-top" src="img/photos/unsplash-1.jpg" alt="Unsplash">
								<div class="card-header">
									<h5 class="card-title mb-0">Card with image and links</h5>
								</div>
								<div class="card-body">
									<p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
									<a href="#" class="card-link">Card link</a>
									<a href="#" class="card-link">Another link</a>
								</div>
							</div>
						</div>-->

						<div class="col-12 col-md-6">
							<div class="card">
								<div class="card-header">
									<h5 class="card-title mb-0">글 번호</h5>
									<p class="card-text" th:text="${board.bNo}"></p>
								</div>

								<div class="card-header">
									<h5 class="card-title mb-0">제목</h5>
									<p class="card-text" th:text="${board.bTitle}"></p>
								</div>

								<div class="card-header">
									<h5 class="card-title mb-0">작성자</h5>
									<p class="card-text" th:text="${board.bWriter}"></p>
								</div>

								<div class="card-header">
									<h5 class="card-title mb-0">작성일</h5>
									<p class="card-text" th:text="${board.bDate}"></p>
								</div>

								<div class="card-header">
									<h5 class="card-title mb-0">조회수</h5>
									<p class="card-text" th:text="${board.bHit}"></p>
								</div>

								<div class="card-header">
									<h5 class="card-title mb-0">내용</h5>
									<p class="card-text" th:text="${board.bContent}"></p>
								</div>

								<div class="card-header">
									<h5 class="card-title mb-0">첨부파일</h5>
									<img class="card-img-top" th:src="@{/upload/{bFileName}(bFileName=${board.bFileName})}">
								</div>

								<div class="card-body">
									<a th:href="@{bModiForm(bNo=${board.bNo})}" class="btn btn-success">수정</a>
									<a th:href="@{bDelete(bNo=${board.bNo})}" class="btn btn-danger">삭제</a>
								</div>
							</div>
							<th:if test="${not empty sessionScope.loginId}">
								<div>
									<textarea rows="5" cols="20" id="CContent"></textarea>
									<button class="btn btn-primary" id="cmtBtn">댓글 입력</button>
								</div>
							</th:if>
							<div id="commentArea"></div>
						</div>

						<!--<div class="col-12 col-md-6">
							<div class="card">
								<div class="card-header">
									<h5 class="card-title mb-0">Card with links</h5>
								</div>
								<div class="card-body">
									<p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
									<a href="#" class="card-link">Card link</a>
									<a href="#" class="card-link">Another link</a>
								</div>
							</div>
						</div>-->

						<!--<div class="col-12 col-md-6">
							<div class="card">
								<div class="card-header">
									<h5 class="card-title mb-0">Card with button</h5>
								</div>
								<div class="card-body">
									<p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
									<a href="#" class="btn btn-primary">Go somewhere</a>
								</div>
							</div>
						</div>-->
					</div>

				</div>
			</main>

			<footer class="footer">
				<div class="container-fluid">
					<div class="row text-muted">
						<div class="col-6 text-start">
							<p class="mb-0">
								<a class="text-muted" href="https://blog.naver.com/kkk0977lll" target="_blank"><strong>YEO SEUNGJAE</strong></a> &copy;
							</p>
						</div>
						<div class="col-6 text-end">
							<ul class="list-inline">
								<li class="list-inline-item">
									<a class="text-muted" href="https://adminkit.io/" target="_blank">Support</a>
								</li>
								<li class="list-inline-item">
									<a class="text-muted" href="https://adminkit.io/" target="_blank">Help Center</a>
								</li>
								<li class="list-inline-item">
									<a class="text-muted" href="https://adminkit.io/" target="_blank">Privacy</a>
								</li>
								<li class="list-inline-item">
									<a class="text-muted" href="https://adminkit.io/" target="_blank">Terms</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</footer>
		</div>
	</div>

	<script src="js/app.js"></script>

</body>
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
<script type="text/javascript">

	$(document).ready(function(){
		let CBNo ='[[${board.bNo}]]';

		$.ajax({
			type : "POST" ,
			url : "C_list" ,
			data : {"CBNo" : CBNo} ,
			dataType : "json" ,
			success : function(result) {
				commentList(result);
			},
			error : function(){
				alert("댓글 리스트 불러오기 실패!");
			}
		});

		$("#cmtBtn").click(function(){
			let CWriter = '[[${session.loginId}]]';
			let CContent = $("#CContent").val();
			let CBNo = '[[${board.BNo}]]';

			$.ajax({
				type : "POST" ,
				url : "C_write" ,
				data : {
						"CWriter" : CWriter,
						"CContent" : CContent,
						"CBNo" : CBNo
				} ,
				dataType : "json" ,
				success : function(result) {
					commentList(result);
					$("#CContent").val("");
				} ,
				error : function() {
					alert("댓글 입력 실패!");
				}
			});
		});
	});

	function commentList(result) {
		let output = "";

		output += "<table class=\"table table-hover my-0\">";
		output += "<caption>댓글목록</caption>";
		output += "<tr>";
		output += "<th>작성자</th>";
		output += "<th>내용</th>";
		output += "<th>삭제</th>";
		output += "</tr>";

		for(let i in result) {
			output += "<tr>";
			output += "<td>"+result[i].cwriter+"</td>";
			output += "<td>"+result[i].ccontent+"</td>";
			output += "<td><button class=\"btn btn-danger\" onclick='cmtDelete("+result[i].cno+")'>삭제</button></td>";
			output += "</tr>";
		}
		output += "</table>";

		$("#commentArea").html(output);
	}

	function cmtDelete(CNo) {

		$.ajax({
			type : "GET" ,
			url : "C_delete" ,
			data : {
				"CNo" : CNo,
				"CBNo" : '[[${board.BNo}]]'
			},
			dataType : "json",
			success : function(result) {
				commentList(result);
			},
			error : function(){
				alert("댓글 삭제 실패!");
			}
		});
	}
</script>
</html>